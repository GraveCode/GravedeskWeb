extends layout

block append head
	script(src='/js/vendor/moment.min.js')
	script(src='/js/messages.js')

block content

	.row.hide(data-bind='with: ticket, fadeVisible: ticket()')
		.show-for-medium-up
			.ticketbox
				span.label.round.left(data-bind='text: friendlyStatus, css: friendlyStatusCSS')
				span.title(data-bind='text: title')	
				span.right(data-bind='text: "last updated " + friendlyDate()')

		.show-for-small
			p.label.round(data-bind='text: friendlyStatus, css: friendlyStatusCSS')
			.panel
				strong.title(data-bind='text: title')	


	.row.hide(data-bind='foreach: messages, fadeVisible: messages()')
		.row
			.large-6.columns(data-bind='css: { "large-offset-6": !fromuser} ')
					ul.messagebox
						li.title(data-bind='html: from, css: Colour')
						li.date(data-bind='html: friendlyDate, css: Colour')
						li.body(data-bind='text: body, css: Colour')

	.row
		.large-6.columns.hide(data-bind='fadeVisible: !isAdmin')
			form
				textarea(data-bind='value: userMsg, valueUpdate: "afterkeydown"')
				button.radius(type='submit') Add Message
		.large-6.columns.hide(data-bind='fadeVisible: isAdmin')
			form(data-bind='submit: addAdminMsg')
				.row
					textarea(data-bind='value: adminMsg, valueUpdate: "afterkeydown"')
				.row
					label(for='checkbox1')
						input#checkbox1(type='checkbox', data-bind='checked: adminMsgPrivate')
						span.custom.checkbox 
						| Keep as private message
				.row
					button.radius(type='submit', data-bind='enable: adminMsg()') Add

